"use strict";function makeWebSocketClient(e){return W.promise(function(t,n){console.log("Connecting to websocket client:",e.wsUrl),e.wsClient=new W.JSONSocketConnection({socketUrl:e.wsUrl});var o=once(function(){$("[data-disconnected-warning]").remove(),report("CONNECTED","to:",e.wsUrl),t(e)});e.wsClient.on("open",o),e.wsClient.on("error",makeReporter("Web Socket Error")),e.wsClient.on("close",makeReporter("Web Socket Close")),e.wsClient.openSocketConnection()})}function addPunterCid(e){return W.promise(function(t,n){e.punterCid=$("[data-punter-cid]").data("punterCid"),t(e)})}function makePunterVizs(e){return W.promise(function(t,n){$("[data-punter-viz]").toArray().map(function(t){e.punterViz=PunterViz.makeViz(),e.punterViz.containerEl=t,e.punterViz.wsClient=e.wsClient;PunterViz.initViz(e.punterViz).error(function(e){console.error("Failed to create Punter app",e)}).success(function(t){if(window.location.search.indexOf("debug")>-1){var n=document.createElement("input");n.setAttribute("type","range"),n.setAttribute("min",-1),n.setAttribute("max",1),n.setAttribute("step",.01),n.setAttribute("value",.25),n.setAttribute("style","position: absolute"),$(n).asEventStream("change").map(function(e){return e.currentTarget}).map(function(e){return $(e).val()}).onValue(function(e){return PunterViz.setVelocity(t,null,e,null)}),$("#punter").prepend(n)}var o=25.714285714,r=$(window).asEventStream("deviceorientation").map(function(e){return[e.originalEvent.gamma,e.originalEvent.alpha,e.originalEvent.beta]}),i=r.map(function(e){return e[0]});r.onValue(function(e){console.log("updating",e),t.deviceRotation=e}),r.throttle(100).onValue(function(e){return PunterViz.setVelocity(t,null,W.map(e[0],-180,180,-1,1,!0),null)}),i.map(function(e){return-o>e?"backward":e>o?"forward":"none"}).skipDuplicates().throttle(100).onValue(function(t){"phone-"+e.punterCid===e.controlMode&&RestesqueUtil.post(e.wsClient,"/motor/rotation/direction/",t)}),i.map(function(e){return Math.abs(e)}).map(function(e){return e>90-o?"high":e>90-2*o?"medium":"low"}).throttle(100).onValue(function(t){"phone-"+e.punterCid===e.controlMode&&RestesqueUtil.post(e.wsClient,"/motor/rotation/speed/",t)}),console.log("Punter application made")})}),t(e)})}function makeRestRadioButtons(e){return W.promise(function(t,n){$('[data-rest-type="radio-post"]').toArray().map($).map(function(t){var n=t.parent();n.on("click touchend",function(n){return n.preventDefault(),console.log("sending",t.val(),"to",t.data("restUri")),RestesqueUtil.post(e.wsClient,t.data("restUri"),t.val()),!1})}),$('[data-rest-type="feildset"]').toArray().map($).map(function(t){function n(){RestesqueUtil.subscribeWithInitialGet(e.wsClient,t.data("restUri"),function(e){o.prop("checked",!1).checkboxradio("refresh").filter('input[value="'+e.getBody()+'"]').attr("checked","checked").checkboxradio("refresh").parent().find("label").removeClass("ui-radio-off").addClass("ui-radio-on")})}var o=t.find('input[type="radio"]').checkboxradio();console.log("Got a field set",t.data("restUri")),n(),e.wsClient.on("open",function(){console.log("Subscribnig:",t.data("restUri")),n()})}),t(e)})}function once(e){var t=!1;return function(){t||(e(),t=!0)}}function report(e,t){console.log("[",e,"]",W.rest(W.toArray(arguments)).join(" "))}function makeReporter(e,t){var n=arguments;return function(){report.apply(this,n);var e=arguments;return W.promise(function(t,n){t.apply(this,e)})}}var PunterViz=function(){function e(){return{containerEl:document.createElement("div"),backroundColor:6382180,velocity:[0,0,0],deviceRotation:[0,0,0],preRenderFns:[],preCubeCamRenderFns:[],postCubeCamRenderFns:[],wsClient:void 0,height:640,width:360,swarmColor:new THREE.Color(16777215),backgroundColor:new THREE.Color(10866508)}}function t(e){return W.promise(function(t,n){function o(){RestesqueUtil.subscribeWithInitialGet(app.wsClient,"/host/control/mode/",function(e){app.controlMode=e.getBody(),console.log("Control Mode Change to:",app.controlMode)})}e.controlMode="",o(),e.wsClient.on("open",o),t(e)})}function n(e){return W.promise(function(t,n){e.camera=new THREE.PerspectiveCamera(70,e.width/e.height,1,3e4),m(e,0,0,200),e.scene=new THREE.Scene,e.renderer=new THREE.WebGLRenderer({antialias:!1}),e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(e.width,e.height),e.renderer.setClearColor(e.backgroundColor),e.renderer.sortObjects=!1,e.containerEl.appendChild(e.renderer.domElement),t(e)})}function o(e){return W.promise(function(t,n){var o=document.createElement("video");o.autoplay=!0,navigator.webkitGetUserMedia({video:!0},function(e){o.src=URL.createObjectURL(e)},function(e){console.log("Failed to get a stream due to",e)}),e.webCamTexture=new THREE.Texture(o),e.webCamTexture.minFilter=THREE.LinearFilter,d(e,function(t,n){o.readyState===o.HAVE_ENOUGH_DATA&&(e.webCamTexture.needsUpdate=!0)}),t(e)})}function r(e){return W.promise(function(t,n){e.cubeCamera=new THREE.CubeCamera(1,3e4,256),e.cubeCamera.renderTarget.minFilter=THREE.LinearMipMapLinearFilter,d(e,function(t,n){e.preCubeCamRenderFns.forEach(function(e){return e(t,n)}),e.cubeCamera.updateCubeMap(e.renderer,e.scene),e.postCubeCamRenderFns.forEach(function(e){return e(t,n)})}),t(e)})}function i(e){return W.promise(function(t,n){e.webCamMaterial=new THREE.MeshBasicMaterial({map:e.webCamTexture,color:16777215,side:THREE.DoubleSide}),t(e)})}function a(e){return W.promise(function(t,n){var o=THREE.ImageUtils.loadTexture("/image/billboard-background.png");o.minFilter=THREE.NearestFilter,o.magFiler=THREE.NearestFilter;var r=new THREE.MeshBasicMaterial({map:o,color:16777215,transparent:!0}),i=new THREE.PlaneBufferGeometry(360,640),a=new THREE.Mesh(i,r);a.translateZ(-250),e.scene.add(a),e.preCubeCamRenderFns.push(function(){a.visible=!1}),e.postCubeCamRenderFns.push(function(){a.visible=!0}),t(e)})}function s(e){return W.promise(function(t,n){function o(n){console.log(n.children[0]),e.webCamHedronMesh=n.children[0].clone(),e.webCamHedronMesh.material=e.webCamMaterial.clone();var o=6e3;e.webCamHedronMesh.scale.set(o,o,o);W.randomBetween(2e-4,2e-5),W.randomBetween(2e-4,2e-5),W.randomBetween(2e-4,2e-5);d(e,function(t,n){e.webCamHedronMesh.rotation.x+=.5*e.velocity[0],e.webCamHedronMesh.rotation.y+=.5*e.velocity[1],e.webCamHedronMesh.rotation.z+=.5*e.velocity[2]}),e.scene.add(e.webCamHedronMesh),e.preCubeCamRenderFns.push(function(){e.webCamHedronMesh.visible=!0,e.webCamHedronMesh.wireframe=!1,e.webCamHedronMesh.material.color.set(16777215)}),e.postCubeCamRenderFns.push(function(){e.webCamHedronMesh.visible=!0,e.webCamHedronMesh.material.color.set(e.backgroundColor)}),t(e)}var r=new THREE.OBJLoader;r.load("/obj/hedron.obj",o)})}function c(e){return W.promise(function(t,n){e.scene.add(new THREE.AmbientLight(2236962));var o=new THREE.DirectionalLight(16777215,2);o.position.set(2,1.2,10).normalize(),e.scene.add(o),o=new THREE.DirectionalLight(16777215,1),o.position.set(-2,1.2,-10).normalize(),e.scene.add(o),t(e)})}function u(e){return W.promise(function(t,n){function o(t){function n(e){return.0174532925*e}this.velocity=[0,0,0],this.mesh=t.clone(),this.anchor=new THREE.Object3D,this.anchor.add(this.mesh),this.mesh.material=o.material.clone(),this.mesh.material.color=e.swarmColor;var r=70;this.mesh.translateX(W.randomBetween(-r,r)),this.mesh.translateY(W.randomBetween(-r,r)),this.mesh.translateZ(W.randomBetween(-r,r)),this.distance=W.map(this.mesh.position.distanceTo(this.anchor.position),0,r,1,.1,!0);var i=250,a=W.interpolations.quarticEaseOut(this.distance);this.mesh.scale.set(a*i/2,a*i/2,a*i);var s=n(180);this.mesh.rotation.x=W.randomBetween(-s,s),this.mesh.rotation.y=W.randomBetween(-s,s),this.mesh.rotation.z=W.randomBetween(-s,s);this.anchor.rotation.x+=W.randomBetween(-n(20),n(20)),this.rotationSpeed=[Math.random(),Math.random(),Math.random()].map(Math.abs)}function r(t){var n=t.children[0],r=120,a=5,s=20;!function c(){if(i.length<r){var t=new o(n);e.swarmObject3D.add(t.anchor),i.push(t),setTimeout(c,W.map(i.length/r,0,1,s,a,W.interpolations.easeIn))}}()}var i=[];e.swarmObject3D=new THREE.Object3D,e.scene.add(e.swarmObject3D),e.preCubeCamRenderFns.push(function(){e.swarmObject3D.visible=!1}),e.postCubeCamRenderFns.push(function(){e.swarmObject3D.visible=!0}),d(e,function(e,t){i.forEach(function(n){return n.update(e,t)})}),o.material=new THREE.MeshPhongMaterial({color:16777215,shininess:0,specular:16777215,envMap:e.cubeCamera.renderTarget,reflectivity:1,side:THREE.DoubleSide}),o.prototype.update=function(t,n){this.velocity[0]+=(e.velocity[0]-this.velocity[0])*(1-this.distance)*.05,this.velocity[1]+=(e.velocity[1]-this.velocity[1])*(1-this.distance)*.05,this.velocity[2]+=(e.velocity[2]-this.velocity[2])*(1-this.distance)*.05,this.anchor.rotation.x+=.4*this.velocity[0],this.anchor.rotation.y+=.4*this.velocity[1],this.anchor.rotation.z+=.4*this.velocity[2];Math.max(this.velocity[0],this.velocity[1],this.velocity[2]);this.mesh.rotation.x+=.01*this.rotationSpeed[0],this.mesh.rotation.y+=.01*this.rotationSpeed[1],this.mesh.rotation.z+=.01*this.rotationSpeed[2]};var a=new THREE.OBJLoader;a.load("/obj/pillow-box.obj",r),t(e)})}function l(e){return W.promise(function(t,n){var o=0,r=0;!function i(t){window.requestAnimationFrame(i),r=t-o,o=t,e.preRenderFns.forEach(function(e){return e(r,t)}),e.renderer.render(e.scene,e.camera)}(o),t(e)})}function d(e,t){return e.preRenderFns.push(t),e}function m(e,t,n,o){return e.camera.position.x=t,e.camera.position.y=n,e.camera.position.z=o,e}function p(e,t,n,o){return W.isDefined(t)&&null!==t&&(e.velocity[0]=t),W.isDefined(n)&&null!==n&&(e.velocity[1]=n),W.isDefined(o)&&null!==o&&(e.velocity[2]=o),e}var h=W.composePromisers(t,n,o,i,r,s,a,u,c,l);return{makeViz:e,initViz:h,setVelocity:p}}(),makeApp=function(){return{wsUrl:W.join("https:"===document.location.protocol?"wss://":"ws://",document.location.host,"/")}},initApp=W.composePromisers(makeWebSocketClient,addPunterCid,makePunterVizs,makeRestRadioButtons);$(function(){initApp(makeApp()).success(function(e){report("OK","TheWorkers.net"),window.app=e})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsbC5qcyIsIm1haW4uanMiLCJwdW50ZXItdml6LmpzIl0sIm5hbWVzIjpbIm1ha2VXZWJTb2NrZXRDbGllbnQiLCJhcHAiLCJXIiwicHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjb25zb2xlIiwibG9nIiwid3NVcmwiLCJ3c0NsaWVudCIsIkpTT05Tb2NrZXRDb25uZWN0aW9uIiwic29ja2V0VXJsIiwicmVzb2x2ZU9uRmlyc3RDb25uZWN0Iiwib25jZSIsIiQiLCJyZW1vdmUiLCJyZXBvcnQiLCJvbiIsIm1ha2VSZXBvcnRlciIsIm9wZW5Tb2NrZXRDb25uZWN0aW9uIiwiYWRkUHVudGVyQ2lkIiwicHVudGVyQ2lkIiwiZGF0YSIsIm1ha2VQdW50ZXJWaXpzIiwidG9BcnJheSIsIm1hcCIsImVsIiwicHVudGVyVml6IiwiUHVudGVyVml6IiwibWFrZVZpeiIsImNvbnRhaW5lckVsIiwiaW5pdFZpeiIsImVycm9yIiwiZXJyIiwic3VjY2VzcyIsInZpeiIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwiaW5kZXhPZiIsInJhbmdlRWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhc0V2ZW50U3RyZWFtIiwiZXZlbnQiLCJjdXJyZW50VGFyZ2V0IiwidmFsIiwib25WYWx1ZSIsInYiLCJzZXRWZWxvY2l0eSIsInByZXBlbmQiLCJyb3RhdGlvblN0ZXAiLCJvcmllbnRhdGlvblN0cmVhbSIsImUiLCJvcmlnaW5hbEV2ZW50IiwiZ2FtbWEiLCJhbHBoYSIsImJldGEiLCJnYW1tYVN0cmVhbSIsImFyciIsImRldmljZVJvdGF0aW9uIiwidGhyb3R0bGUiLCJnIiwic2tpcER1cGxpY2F0ZXMiLCJkaXJlY3Rpb24iLCJjb250cm9sTW9kZSIsIlJlc3Rlc3F1ZVV0aWwiLCJwb3N0IiwiTWF0aCIsImFicyIsInNwZWVkIiwibWFrZVJlc3RSYWRpb0J1dHRvbnMiLCIkZWwiLCIkd3JhcHBlckVsIiwicGFyZW50IiwicHJldmVudERlZmF1bHQiLCJzdWJzY3JpYmVSYWRpb0ZlaWxkU2V0Iiwic3Vic2NyaWJlV2l0aEluaXRpYWxHZXQiLCJwYWNrZXQiLCJyYWRpb0VscyIsInByb3AiLCJjaGVja2JveHJhZGlvIiwiZmlsdGVyIiwiZ2V0Qm9keSIsImF0dHIiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImZuIiwiaGFzVHJpZ2dlcmVkIiwic3RhdHVzIiwic3RyIiwicmVzdCIsImFyZ3VtZW50cyIsImpvaW4iLCJyZXBvcnRBcmdzIiwiYXBwbHkiLCJ0aGlzIiwiY2FsbGVlQXJncyIsImJhY2tyb3VuZENvbG9yIiwidmVsb2NpdHkiLCJwcmVSZW5kZXJGbnMiLCJwcmVDdWJlQ2FtUmVuZGVyRm5zIiwicG9zdEN1YmVDYW1SZW5kZXJGbnMiLCJ1bmRlZmluZWQiLCJoZWlnaHQiLCJ3aWR0aCIsInN3YXJtQ29sb3IiLCJUSFJFRSIsIkNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwic3Vic2NyaWJlVG9Ib3N0Q29udHJvbE1vZGUiLCJzdWJzY3JpYmUiLCJtYWtlQ2FtZXJhU2NlbmVSZW5kZXJlciIsImNhbWVyYSIsIlBlcnNwZWN0aXZlQ2FtZXJhIiwic2V0Q2FtZXJhUG9zaXRpb24iLCJzY2VuZSIsIlNjZW5lIiwicmVuZGVyZXIiLCJXZWJHTFJlbmRlcmVyIiwiYW50aWFsaWFzIiwic2V0UGl4ZWxSYXRpbyIsImRldmljZVBpeGVsUmF0aW8iLCJzZXRTaXplIiwic2V0Q2xlYXJDb2xvciIsInNvcnRPYmplY3RzIiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwibWFrZVdlYkNhbVRleHR1cmUiLCJ3ZWJDYW1FbCIsImF1dG9wbGF5IiwibmF2aWdhdG9yIiwid2Via2l0R2V0VXNlck1lZGlhIiwidmlkZW8iLCJzdHJlYW0iLCJzcmMiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJ3ZWJDYW1UZXh0dXJlIiwiVGV4dHVyZSIsIm1pbkZpbHRlciIsIkxpbmVhckZpbHRlciIsImFkZFByZVJlbmRlckZuIiwiZGV0bGFNUyIsInRpbWVzdGFtcE1TIiwicmVhZHlTdGF0ZSIsIkhBVkVfRU5PVUdIX0RBVEEiLCJuZWVkc1VwZGF0ZSIsIm1ha2VDdWJlQ2FtIiwiY3ViZUNhbWVyYSIsIkN1YmVDYW1lcmEiLCJyZW5kZXJUYXJnZXQiLCJMaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXIiLCJkZWx0YU1TIiwiZm9yRWFjaCIsInVwZGF0ZUN1YmVNYXAiLCJtYWtlV2ViQ2FtTWF0ZXJpYWwiLCJ3ZWJDYW1NYXRlcmlhbCIsIk1lc2hCYXNpY01hdGVyaWFsIiwiY29sb3IiLCJzaWRlIiwiRG91YmxlU2lkZSIsIm1ha2VCaWxsYm9hcmRCYWNrZ3JvdW5kIiwidGV4dHVyZSIsIkltYWdlVXRpbHMiLCJsb2FkVGV4dHVyZSIsIk5lYXJlc3RGaWx0ZXIiLCJtYWdGaWxlciIsIm1hdGVyaWFsIiwidHJhbnNwYXJlbnQiLCJnZW9tZXRyeSIsIlBsYW5lQnVmZmVyR2VvbWV0cnkiLCJtZXNoIiwiTWVzaCIsInRyYW5zbGF0ZVoiLCJhZGQiLCJwdXNoIiwidmlzaWJsZSIsIm1ha2VXZWJDYW1IZWRyb25NZXNoIiwib25PYmpMb2FkZWQiLCJvYmoiLCJjaGlsZHJlbiIsIndlYkNhbUhlZHJvbk1lc2giLCJjbG9uZSIsInNjYWxlIiwic2V0IiwicmFuZG9tQmV0d2VlbiIsInJvdGF0aW9uIiwieCIsInkiLCJ6Iiwid2lyZWZyYW1lIiwibG9hZGVyIiwiT0JKTG9hZGVyIiwibG9hZCIsIm1ha2VMaWdodHMiLCJBbWJpZW50TGlnaHQiLCJkaXJlY3Rpb25hbExpZ2h0IiwiRGlyZWN0aW9uYWxMaWdodCIsInBvc2l0aW9uIiwibm9ybWFsaXplIiwibWFrZVN3YXJtIiwiUGFydGljbGUiLCJ0b1JhZCIsImFuY2hvciIsIk9iamVjdDNEIiwicmFuZ2UiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsImRpc3RhbmNlIiwiZGlzdGFuY2VUbyIsInNjYWxlTXV0aXBsaWVyIiwiZCIsImludGVycG9sYXRpb25zIiwicXVhcnRpY0Vhc2VPdXQiLCJyIiwicm90YXRpb25TcGVlZCIsInJhbmRvbSIsIm1heFBhcnRpY2xlcyIsIm1pbkNyZWF0aW9uVGltZSIsIm1heENyZWF0aW9uVGltZU1TIiwiY3JlYXRlTW9yZSIsInBhcnRpY2xlcyIsImxlbmd0aCIsInBhcnRpY2xlIiwic3dhcm1PYmplY3QzRCIsInNldFRpbWVvdXQiLCJlYXNlSW4iLCJ1cGRhdGUiLCJNZXNoUGhvbmdNYXRlcmlhbCIsInNoaW5pbmVzcyIsInNwZWN1bGFyIiwiZW52TWFwIiwicmVmbGVjdGl2aXR5IiwicHJvdG90eXBlIiwibWF4IiwibWFrZVJlbmRlckxvb3AiLCJsYXN0VGltZXN0YW1wTVMiLCJsb29wIiwiY3VycmVudFRpbWVzdGFtcE1TIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVuZGVyIiwiaXNEZWZpbmVkIiwiY29tcG9zZVByb21pc2VycyIsIm1ha2VBcHAiLCJwcm90b2NvbCIsImhvc3QiLCJpbml0QXBwIl0sIm1hcHBpbmdzIjoiQUFRQSxZQ3lCQSxTQUFTQSxxQkFBc0JDLEdBQzNCLE1BQU9DLEdBQUVDLFFBQVMsU0FBV0MsRUFBU0MsR0FDbENDLFFBQVFDLElBQUssa0NBQW1DTixFQUFJTyxPQUVwRFAsRUFBSVEsU0FBVyxHQUFJUCxHQUFFUSxzQkFDakJDLFVBQVdWLEVBQUlPLE9BR25CLElBQUlJLEdBQXdCQyxLQUFNLFdBQzlCQyxFQUFHLCtCQUFnQ0MsU0FDbkNDLE9BQVEsWUFBYSxNQUFPZixFQUFJTyxPQUNoQ0osRUFBU0gsSUFHYkEsR0FBSVEsU0FBU1EsR0FBSSxPQUFRTCxHQUN6QlgsRUFBSVEsU0FBU1EsR0FBSSxRQUFTQyxhQUFjLHFCQUN4Q2pCLEVBQUlRLFNBQVNRLEdBQUksUUFBU0MsYUFBYyxxQkFDeENqQixFQUFJUSxTQUFTVSx5QkFJckIsUUFBU0MsY0FBZW5CLEdBQ3BCLE1BQU9DLEdBQUVDLFFBQVMsU0FBV0MsRUFBU0MsR0FDbENKLEVBQUlvQixVQUFZUCxFQUFHLHFCQUFzQlEsS0FBTSxhQUMvQ2xCLEVBQVNILEtBT2pCLFFB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R0MsRUFBR0MsR0FJcEMsTUFIQTdKLEdBQUlnRixPQUFPc0YsU0FBU1gsRUFBSUEsRUFDeEIzSixFQUFJZ0YsT0FBT3NGLFNBQVNWLEVBQUlBLEVBQ3hCNUosRUFBSWdGLE9BQU9zRixTQUFTVCxFQUFJQSxFQUNqQjdKLEVBR1gsUUFBU2UsR0FBY2YsRUFBSzJKLEVBQUdDLEVBQUdDLEdBSTlCLE1BSEs5TCxHQUFFa1AsVUFBV3RELElBQWEsT0FBTkEsSUFBZTNKLEVBQUlrRSxTQUFVLEdBQU15RixHQUN2RDVMLEVBQUVrUCxVQUFXckQsSUFBYSxPQUFOQSxJQUFlNUosRUFBSWtFLFNBQVUsR0FBTTBGLEdBQ3ZEN0wsRUFBRWtQLFVBQVdwRCxJQUFhLE9BQU5BLElBQWU3SixFQUFJa0UsU0FBVSxHQUFNMkYsR0FDckQ3SixFQW5jWCxHQUFJSixHQUFVN0IsRUFBRW1QLGlCQUFrQnJJLEVBQ0FFLEVBQ0FnQixFQUNBNEIsRUFDQVIsRUFFQThCLEVBQ0FoQixFQUNBdUMsRUFDQU4sRUFDQXlDLEVBOGJsQyxRQUNJak4sUUFBU0EsRUFDVEUsUUFBU0EsRUFDVG1CLFlBQWFBLE1EL2RqQm9NLFFBQVUsV0FDVixPQUNJOU8sTUFBT04sRUFBRTZGLEtBQXFDLFdBQS9CdEQsU0FBU0osU0FBU2tOLFNBQXdCLFNBQVcsUUFDckQ5TSxTQUFTSixTQUFTbU4sS0FDbEIsT0FJbkJDLFFBQVV2UCxFQUFFbVAsaUJBQWtCclAsb0JBQ0FvQixhQUNBRyxlQUNBaUQscUJBRWxDMUQsR0FBRyxXQUNDMk8sUUFBU0gsV0FDUnBOLFFBQVMsU0FBV2pDLEdBQ2pCZSxPQUFRLEtBQU0sa0JBQ2RvQixPQUFPbkMsSUFBTUEiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsLCIvKiBqc2hpbnQgZXNuZXh0OiB0cnVlICovXG5cbi8vIE1haW4uanNcbi8vID09PT09PT1cbi8vIEVudHJ5IHBvaW50IG9mIHRoZSBhcHBsaWNhdGlvbi5cblxuLy8gTWFrZSAmIEluaXRcbi8vID09PT09PT09PT09XG5cbnZhciBtYWtlQXBwID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHdzVXJsOiBXLmpvaW4oIGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyA/ICd3c3M6Ly8nIDogJ3dzOi8vJyxcbiAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24uaG9zdCwgLy9kb2N1bWVudC4nLy8vJy8vJ3dzczovLzE5Mi4xNjguMC43OjcwODAnXG4gICAgICAgICAgICAgICAgICAgICAgICcvJyApXG4gICAgfTtcbn07XG5cbnZhciBpbml0QXBwID0gVy5jb21wb3NlUHJvbWlzZXJzKCBtYWtlV2ViU29ja2V0Q2xpZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFB1bnRlckNpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlUHVudGVyVml6cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlUmVzdFJhZGlvQnV0dG9ucyApO1xuXG4kKCBmdW5jdGlvbiAoKSB7XG4gICAgaW5pdEFwcCggbWFrZUFwcCgpIClcbiAgICAuc3VjY2VzcyggZnVuY3Rpb24gKCBhcHAgKSB7XG4gICAgICAgIHJlcG9ydCggJ09LJywgJ1RoZVdvcmtlcnMubmV0JyApO1xuICAgICAgICB3aW5kb3cuYXBwID0gYXBwO1xuICAgIH0pO1xufSk7XG5cbi8vIFByb21pc2Vyc1xuLy8gPT09PT09PT09XG5cbmZ1bmN0aW9uIG1ha2VXZWJTb2NrZXRDbGllbnQgKCBhcHAgKSB7XG4gICAgcmV0dXJuIFcucHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCAnQ29ubmVjdGluZyB0byB3ZWJzb2NrZXQgY2xpZW50OicsIGFwcC53c1VybCApO1xuICAgICAgICBcbiAgICAgICAgYXBwLndzQ2xpZW50ID0gbmV3IFcuSlNPTlNvY2tldENvbm5lY3Rpb24oe1xuICAgICAgICAgICAgc29ja2V0VXJsOiBhcHAud3NVcmxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzb2x2ZU9uRmlyc3RDb25uZWN0ID0gb25jZSggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCggJ1tkYXRhLWRpc2Nvbm5lY3RlZC13YXJuaW5nXScgKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHJlcG9ydCggJ0NPTk5FQ1RFRCcsICd0bzonLCBhcHAud3NVcmwgKTtcbiAgICAgICAgICAgIHJlc29sdmUoIGFwcCApO1xuICAgICAgICB9KTtcblxuICAgICAgICBhcHAud3NDbGllbnQub24oICdvcGVuJywgcmVzb2x2ZU9uRmlyc3RDb25uZWN0ICk7XG4gICAgICAgIGFwcC53c0NsaWVudC5vbiggJ2Vycm9yJywgbWFrZVJlcG9ydGVyKCAnV2ViIFNvY2tldCBFcnJvcicgKSApO1xuICAgICAgICBhcHAud3NDbGllbnQub24oICdjbG9zZScsIG1ha2VSZXBvcnRlciggJ1dlYiBTb2NrZXQgQ2xvc2UnICkgKTtcbiAgICAgICAgYXBwLndzQ2xpZW50Lm9wZW5Tb2NrZXRDb25uZWN0aW9uKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZFB1bnRlckNpZCAoIGFwcCApIHtcbiAgICByZXR1cm4gVy5wcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUsIHJlamVjdCApIHtcbiAgICAgICAgYXBwLnB1bnRlckNpZCA9ICQoICdbZGF0YS1wdW50ZXItY2lkXScgKS5kYXRhKCAncHVudGVyQ2lkJyApO1xuICAgICAgICByZXNvbHZlKCBhcHAgKTtcbiAgICB9KTtcbn1cblxuLy8gUHVudGVyIFZpelxuLy8gLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBtYWtlUHVudGVyVml6cyAoIGFwcCApIHtcbiAgICByZXR1cm4gVy5wcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUsIHJlamVjdCApIHtcbiAgICAgICAgJCggXCJbZGF0YS1wdW50ZXItdml6XVwiIClcbiAgICAgICAgICAgIC50b0FycmF5KClcbiAgICAgICAgICAgIC5tYXAoIGZ1bmN0aW9uICggZWwgKSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSB0aGUgcHVudGVyIGFwcGxpY2F0aW9uXG4gICAgICAgICAgICAgICAgYXBwLnB1bnRlclZpeiA9IFB1bnRlclZpei5tYWtlVml6KCk7XG4gICAgICAgICAgICAgICAgLy8gQWRkIG91dCBkb20gZWxlbWVudFxuICAgICAgICAgICAgICAgIGFwcC5wdW50ZXJWaXouY29udGFpbmVyRWwgPSBlbDtcbiAgICAgICAgICAgICAgICAvLyBXZWJTb2NrZXRzXG4gICAgICAgICAgICAgICAgYXBwLnB1bnRlclZpei53c0NsaWVudCA9IGFwcC53c0NsaWVudDtcblxuICAgICAgICAgICAgICAgIC8vIEluaXRhaWxpc2UgaXRcblxuICAgICAgICAgICAgICAgIHZhciBGT1JXQVJEU19ISUdIID0gWyBbICcvJyBdIF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgUHVudGVyVml6XG4gICAgICAgICAgICAgICAgICAgIC5pbml0Vml6KCBhcHAucHVudGVyVml6IClcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKCBmdW5jdGlvbiAoIGVyciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoICdGYWlsZWQgdG8gY3JlYXRlIFB1bnRlciBhcHAnLCBlcnIgKTtcbiAgICAgICAgICAgICAgICAgICAgfSkgXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKCBmdW5jdGlvbiAoIHZpeiApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGV2aWNlIFJvdGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9uLU1vYmlsZSAvIERlYnVnXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggd2luZG93LmxvY2F0aW9uLnNlYXJjaC5pbmRleE9mKCAnZGVidWcnKSA+IC0xICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2lucHV0JyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlRWwuc2V0QXR0cmlidXRlKCAndHlwZScsICdyYW5nZScgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZUVsLnNldEF0dHJpYnV0ZSggJ21pbicsIC0xICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VFbC5zZXRBdHRyaWJ1dGUoICdtYXgnLCAxICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VFbC5zZXRBdHRyaWJ1dGUoICdzdGVwJywgMC4wMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlRWwuc2V0QXR0cmlidXRlKCAndmFsdWUnLCAwLjI1ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VFbC5zZXRBdHRyaWJ1dGUoICdzdHlsZScsICdwb3NpdGlvbjogYWJzb2x1dGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCByYW5nZUVsIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFzRXZlbnRTdHJlYW0oICdjaGFuZ2UnIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCggZXZlbnQgPT4gZXZlbnQuY3VycmVudFRhcmdldCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoIGVsID0+ICQoIGVsICkudmFsKCkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25WYWx1ZSggdiA9PiBQdW50ZXJWaXouc2V0VmVsb2NpdHkoIHZpeiwgbnVsbCwgdiwgbnVsbCApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCAnI3B1bnRlcicgKS5wcmVwZW5kKCByYW5nZUVsICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1vYmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tLS0tXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRpb25TdGVwID0gMjUuNzE0Mjg1NzE0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHJvdGF0aW9uIGNvbnRyb2xzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnYW1tYSByaWdodCA5MCwgbGVmdCAtOTBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmllbnRhdGlvblN0cmVhbSA9ICAkKCB3aW5kb3cgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXNFdmVudFN0cmVhbSggJ2RldmljZW9yaWVudGF0aW9uJyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoIGUgPT4gWyBlLm9yaWdpbmFsRXZlbnQuZ2FtbWEsIGUub3JpZ2luYWxFdmVudC5hbHBoYSwgZS5vcmlnaW5hbEV2ZW50LmJldGEgXSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2FtbWFTdHJlYW0gPSBvcmllbnRhdGlvblN0cmVhbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoIGFyciA9PiBhcnJbIDAgXSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uVmFsdWUoIGZ1bmN0aW9uICggYXJyICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICd1cGRhdGluZycsIGFyciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXouZGV2aWNlUm90YXRpb24gPSBhcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRocm90dGxlKCAxMDAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vblZhbHVlKCBhcnIgPT4gUHVudGVyVml6LnNldFZlbG9jaXR5KCB2aXosIG51bGwsIFcubWFwKCBhcnJbMF0sIC0xODAsIDE4MCwgLTEsIDEsIHRydWUgKSwgbnVsbCApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yaWVudGF0aW9uU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLm9uVmFsdWUoIGFyciA9PiB2aXouY2FtZXJhLnJvdGF0aW9uLnogPSBhcnJbIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFsgYmgsIGJtLCBibCwgbiwgZmwsIGZtLCBmaCBdXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcndhcmRzICYgQmFja3dhcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1tYVN0cmVhbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoIGZ1bmN0aW9uICggZyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBnIDwgLXJvdGF0aW9uU3RlcCApIHsgcmV0dXJuICdiYWNrd2FyZCc7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIGcgPiByb3RhdGlvblN0ZXAgKSB7IHJldHVybiAnZm9yd2FyZCc7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IHJldHVybiAnbm9uZSc7IH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2tpcER1cGxpY2F0ZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aHJvdHRsZSggMTAwIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25WYWx1ZSggZnVuY3Rpb24gKCBkaXJlY3Rpb24gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJ3Bob25lLScgKyBhcHAucHVudGVyQ2lkID09PSBhcHAuY29udHJvbE1vZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXN0ZXNxdWVVdGlsLnBvc3QoIGFwcC53c0NsaWVudCwgJy9tb3Rvci9yb3RhdGlvbi9kaXJlY3Rpb24vJywgZGlyZWN0aW9uICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BlZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbW1hU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCggZyA9PiBNYXRoLmFicyggZyApIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKCBmdW5jdGlvbiAoIGcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZyA+IDkwIC0gcm90YXRpb25TdGVwICkgeyByZXR1cm4gJ2hpZ2gnOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCBnID4gOTAgLSAoIHJvdGF0aW9uU3RlcCAqIDIgKSApIHsgcmV0dXJuICdtZWRpdW0nOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyByZXR1cm4gJ2xvdyc7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aHJvdHRsZSggMTAwIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25WYWx1ZSggZnVuY3Rpb24gKCBzcGVlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAncGhvbmUtJyArIGFwcC5wdW50ZXJDaWQgPT09IGFwcC5jb250cm9sTW9kZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlc3Rlc3F1ZVV0aWwucG9zdCggYXBwLndzQ2xpZW50LCAnL21vdG9yL3JvdGF0aW9uL3NwZWVkLycsIHNwZWVkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICdQdW50ZXIgYXBwbGljYXRpb24gbWFkZScgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXNvbHZlKCBhcHAgKTtcbiAgICB9KTtcbn1cblxuLy8galF1ZXJ5IE1vYmlsZSBVaSBCaW5kaW5nc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBtYWtlUmVzdFJhZGlvQnV0dG9ucyAoIGFwcCApIHtcbiAgICByZXR1cm4gVy5wcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUsIHJlamVjdCApIHtcbiAgICAgICAgLy8gUmFkaW8gQnV0dG9uc1xuICAgICAgICAvLyA9PT09PT09PT09PT09XG4gICAgICAgICQoICdbZGF0YS1yZXN0LXR5cGU9XCJyYWRpby1wb3N0XCJdJyApXG4gICAgICAgICAgICAudG9BcnJheSgpXG4gICAgICAgICAgICAubWFwKCAkIClcbiAgICAgICAgICAgIC5tYXAoIGZ1bmN0aW9uICggJGVsICkge1xuICAgICAgICAgICAgICAgIC8vIERpc2FibGUgcmVhbCBldmVudHNcbiAgICAgICAgICAgICAgICB2YXIgJHdyYXBwZXJFbCA9ICRlbC5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgICAkd3JhcHBlckVsLm9uKCAnY2xpY2sgdG91Y2hlbmQnLCBmdW5jdGlvbiAoIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICdzZW5kaW5nJywkZWwudmFsKCksICd0bycsICRlbC5kYXRhKCAncmVzdFVyaScgKSAgKTtcbiAgICAgICAgICAgICAgICAgICAgUmVzdGVzcXVlVXRpbC5wb3N0KCBhcHAud3NDbGllbnQsICRlbC5kYXRhKCAncmVzdFVyaScgKSwgJGVsLnZhbCgpICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJhZGlvIEZpZWxkIFNldHNcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PVxuICAgICAgICAkKCAnW2RhdGEtcmVzdC10eXBlPVwiZmVpbGRzZXRcIl0nIClcbiAgICAgICAgICAgIC50b0FycmF5KClcbiAgICAgICAgICAgIC5tYXAoICQgKVxuICAgICAgICAgICAgLm1hcCggZnVuY3Rpb24gKCAkZWwgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmFkaW9FbHMgPSAkZWwuZmluZCggJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScgKS5jaGVja2JveHJhZGlvKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coICAnR290IGEgZmllbGQgc2V0JywgJGVsLmRhdGEoICdyZXN0VXJpJyApICk7XG5cbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVSYWRpb0ZlaWxkU2V0KCk7XG4gICAgICAgICAgICAgICAgYXBwLndzQ2xpZW50Lm9uKCAnb3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICdTdWJzY3JpYm5pZzonLCAgJGVsLmRhdGEoICdyZXN0VXJpJyApICk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZVJhZGlvRmVpbGRTZXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1YnNjcmliZVJhZGlvRmVpbGRTZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIFJlc3Rlc3F1ZVV0aWwuc3Vic2NyaWJlV2l0aEluaXRpYWxHZXQoIGFwcC53c0NsaWVudCwgJGVsLmRhdGEoICdyZXN0VXJpJyApLCBmdW5jdGlvbiAoIHBhY2tldCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvRWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb3AoICdjaGVja2VkJywgZmFsc2UgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGVja2JveHJhZGlvKCAncmVmcmVzaCcgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoICdpbnB1dFt2YWx1ZT1cIicrIHBhY2tldC5nZXRCb2R5KCkgKydcIl0nIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0ciggJ2NoZWNrZWQnLCAnY2hlY2tlZCcgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGVja2JveHJhZGlvKCAncmVmcmVzaCcgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCAnbGFiZWwnIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoICd1aS1yYWRpby1vZmYnIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoICd1aS1yYWRpby1vbicgKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXNvbHZlKCBhcHAgKTtcbiAgICB9KTtcbn1cblxuLy8gVXRpbHNcbi8vID09PT09XG5cbi8vIEZ1bmN0aW9uXG4vLyAtLS0tLS0tLVxuICAgIFxuZnVuY3Rpb24gb25jZSAoIGZuICkge1xuICAgIHZhciBoYXNUcmlnZ2VyZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoICEgaGFzVHJpZ2dlcmVkICkge1xuICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIGhhc1RyaWdnZXJlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBSZXBvcnRpbmdcbi8vIC0tLS0tLS0tLVxuXG5mdW5jdGlvbiByZXBvcnQoIHN0YXR1cywgc3RyICkge1xuICAgIGNvbnNvbGUubG9nKCAnWycsIHN0YXR1cywgJ10nLCBXLnJlc3QoIFcudG9BcnJheSggYXJndW1lbnRzICkgKS5qb2luKCAnICcgKSApO1xufVxuXG5mdW5jdGlvbiBtYWtlUmVwb3J0ZXIoIHN0YXR1cywgc3RyICkge1xuICAgIHZhciByZXBvcnRBcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlcG9ydC5hcHBseSggdGhpcywgcmVwb3J0QXJncyApO1xuICAgICAgICB2YXIgY2FsbGVlQXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgcmV0dXJuIFcucHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG4gICAgICAgICAgICByZXNvbHZlLmFwcGx5KCB0aGlzLCBjYWxsZWVBcmdzICk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4iLCIvKiBqc2hpbnQgZXNuZXh0OiB0cnVlICovXG5cbi8vIFB1bnRlciBWaXpcbi8vID09PT09PT09PT1cbi8vIEEgdGhyZWUuanMgdmlzdWxpc2F0aW9uIHRvIGJlXG4vLyBydW4gb24gYW4gSFRDIHBob25lIGFuZCBjYXJyaWVkIGJ5XG4vLyBwdW50ZXJzIGludG8gdGhlIG1pcnJvciBib3guXG5cbnZhciBQdW50ZXJWaXogPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gSW5pdCAmIG1ha2VcbiAgICAvLyA9PT09PT09PT09PVxuICAgIGZ1bmN0aW9uIG1ha2VWaXogKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGFpbmVyRWw6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICksXG4gICAgICAgICAgICBiYWNrcm91bmRDb2xvcjogMHg2MTYyNjQsXG4gICAgICAgICAgICB2ZWxvY2l0eTogWyAwLCAwLCAwIF0sXG4gICAgICAgICAgICBkZXZpY2VSb3RhdGlvbjogWyAwLCAwLCAwIF0sXG4gICAgICAgICAgICBwcmVSZW5kZXJGbnM6IFtdLFxuICAgICAgICAgICAgcHJlQ3ViZUNhbVJlbmRlckZuczogW10sXG4gICAgICAgICAgICBwb3N0Q3ViZUNhbVJlbmRlckZuczogW10sXG4gICAgICAgICAgICB3c0NsaWVudDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaGVpZ2h0OiA2NDAsXG4gICAgICAgICAgICB3aWR0aDogMzYwLFxuICAgICAgICAgICAgc3dhcm1Db2xvcjogbmV3IFRIUkVFLkNvbG9yKCAweGZmZmZmZiApLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBuZXcgVEhSRUUuQ29sb3IoIDB4QTVDRjRDIClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgaW5pdFZpeiA9IFcuY29tcG9zZVByb21pc2Vycyggc3Vic2NyaWJlVG9Ib3N0Q29udHJvbE1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VDYW1lcmFTY2VuZVJlbmRlcmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlV2ViQ2FtVGV4dHVyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZVdlYkNhbU1hdGVyaWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlQ3ViZUNhbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFrZVdlYkNhbUJveE1lc2gsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VXZWJDYW1IZWRyb25NZXNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlQmlsbGJvYXJkQmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZVN3YXJtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlTGlnaHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlUmVuZGVyTG9vcCApO1xuXG4gICAgLy8gUHJvbWlzZXJzXG4gICAgLy8gPT09PT09PT09XG5cbiAgICAvLyBSZXN0ZXNxdWVcbiAgICAvLyAtLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBzdWJzY3JpYmVUb0hvc3RDb250cm9sTW9kZSAoIHZpeiApIHtcbiAgICAgICAgcmV0dXJuIFcucHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG4gICAgICAgICAgICB2aXouY29udHJvbE1vZGUgPSAnJztcblxuICAgICAgICAgICAgc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB2aXoud3NDbGllbnQub24oICdvcGVuJywgc3Vic2NyaWJlICk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1YnNjcmliZSAoKSB7XG4gICAgICAgICAgICAgICAgUmVzdGVzcXVlVXRpbFxuICAgICAgICAgICAgICAgICAgICAuc3Vic2NyaWJlV2l0aEluaXRpYWxHZXQoIGFwcC53c0NsaWVudCwgJy9ob3N0L2NvbnRyb2wvbW9kZS8nLCBmdW5jdGlvbiAoIHBhY2tldCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5jb250cm9sTW9kZSA9IHBhY2tldC5nZXRCb2R5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ0NvbnRyb2wgTW9kZSBDaGFuZ2UgdG86JywgYXBwLmNvbnRyb2xNb2RlICk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKCB2aXogKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2FtZXJhLCBTY2VuZSwgUmVuZGVyZXJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGZ1bmN0aW9uIG1ha2VDYW1lcmFTY2VuZVJlbmRlcmVyICggdml6ICkge1xuICAgICAgICByZXR1cm4gVy5wcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUsIHJlamVjdCApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2FtZXJhXG4gICAgICAgICAgICAvLyAtLS0tLS1cbiAgICAgICAgICAgIHZpei5jYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDcwLCB2aXoud2lkdGggLyB2aXouaGVpZ2h0LCAxLCAzMDAwMCApO1xuICAgICAgICAgICAgc2V0Q2FtZXJhUG9zaXRpb24oIHZpeiwgMCwgMCwgMjAwICk7XG5cbiAgICAgICAgICAgIC8vIFNjZW5lXG4gICAgICAgICAgICAvLyAtLS0tLVxuICAgICAgICAgICAgdml6LnNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG5cbiAgICAgICAgICAgIC8vIFJlbmRlcmVyXG4gICAgICAgICAgICAvLyAtLS0tLS0tLVxuICAgICAgICAgICAgdml6LnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoIHsgYW50aWFsaWFzOiBmYWxzZSB9ICk7XG4gICAgICAgICAgICB2aXoucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyggd2luZG93LmRldmljZVBpeGVsUmF0aW8gKTtcbiAgICAgICAgICAgIHZpei5yZW5kZXJlci5zZXRTaXplKCB2aXoud2lkdGgsIHZpei5oZWlnaHQgKTtcbiAgICAgICAgICAgIHZpei5yZW5kZXJlci5zZXRDbGVhckNvbG9yKCB2aXouYmFja2dyb3VuZENvbG9yICk7XG4gICAgICAgICAgICB2aXoucmVuZGVyZXIuc29ydE9iamVjdHMgPSBmYWxzZTtcblxuICAgICAgICAgICAgdml6LmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKCB2aXoucmVuZGVyZXIuZG9tRWxlbWVudCApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXNvbHZlKCB2aXogKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2ViIENhbVxuICAgIC8vIC0tLS0tLS1cbiAgICAvLyBNYWtlIHRoZSB3ZWIgY2FtIGF2YWlsYWJsZSBhcyBhIHRleHR1cmVcbiAgICBmdW5jdGlvbiBtYWtlV2ViQ2FtVGV4dHVyZSAoIHZpeiApIHtcbiAgICAgICAgcmV0dXJuIFcucHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICB2YXIgd2ViQ2FtRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgd2ViQ2FtRWwuYXV0b3BsYXkgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBXZWIgQ2FtIFN0cmVhbVxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEoIHsgdmlkZW86dHJ1ZSB9LCBmdW5jdGlvbiggc3RyZWFtICl7XG4gICAgICAgICAgICAgICAgd2ViQ2FtRWwuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTCggc3RyZWFtICk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiggZXJyICl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGYWlsZWQgdG8gZ2V0IGEgc3RyZWFtIGR1ZSB0b1wiLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFdlYiBDYW0gVGV4dHVyZVxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICB2aXoud2ViQ2FtVGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlKCB3ZWJDYW1FbCApO1xuICAgICAgICAgICAgdml6LndlYkNhbVRleHR1cmUubWluRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW5kZXIgVXBkYXRlc1xuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGFkZFByZVJlbmRlckZuKCB2aXosIGZ1bmN0aW9uICggZGV0bGFNUywgdGltZXN0YW1wTVMgKSB7XG4gICAgICAgICAgICAgICAgaWYoIHdlYkNhbUVsLnJlYWR5U3RhdGUgPT09IHdlYkNhbUVsLkhBVkVfRU5PVUdIX0RBVEEgKXtcbiAgICAgICAgICAgICAgICAgICAgdml6LndlYkNhbVRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXNvbHZlKCB2aXogKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ3ViZSBDYW1lcmFcbiAgICAvLyAtLS0tLS0tLS0tLVxuICAgIC8vIENyZWF0ZSBhIGN1YmUgY2FtIGZvciBhIGR5bmFtaWMgZW52TWFwLlxuICAgIC8vIFRoaXMgYWxzbyBlbmFibGVzIHR3byBob29rczogYHByZUN1YmVDYW1SZW5kZXJBY3Rpb25zYCAmIGBwb3N0Q3ViZUNhbVJlbmRlckFjdGlvbnNgXG4gICAgLy8gaW4gdGhlIHZpeiBmb3IgdGhhdCBvYmplY3QzRCBpbiB0aGUgc2NlbmUgY2FuIGJlIHR1cm5lZCBvbiBhbmQgb2ZmIGR1cmluZ1xuICAgIC8vIHRoZSB3ZWJjYW1zIHJlbmRlclxuICAgIGZ1bmN0aW9uIG1ha2VDdWJlQ2FtICggdml6ICkgeyBcbiAgICAgICAgcmV0dXJuIFcucHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG5cbiAgICAgICAgICAgIHZpei5jdWJlQ2FtZXJhID0gbmV3IFRIUkVFLkN1YmVDYW1lcmEoIDEsIDMwMDAwLCAyNTYgKTsgLy8gbmVhciwgZmFyLCByZXNvbHV0aW9uXG4gICAgICAgICAgICB2aXouY3ViZUNhbWVyYS5yZW5kZXJUYXJnZXQubWluRmlsdGVyID0gVEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyOyAvLyBtaXBtYXAgZmlsdGVyXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFkZFByZVJlbmRlckZuKCB2aXosIGZ1bmN0aW9uICggZGVsdGFNUywgdGltZXN0YW1wTVMgKSB7ICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlbmRlciB0aGUgY3ViZSBjYW1lcmEgdG8gY3ViZSBtYXBcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgdml6LnByZUN1YmVDYW1SZW5kZXJGbnMuZm9yRWFjaCggZm4gPT4gZm4oIGRlbHRhTVMsIHRpbWVzdGFtcE1TICkgKTtcbiAgICAgICAgICAgICAgICB2aXouY3ViZUNhbWVyYS51cGRhdGVDdWJlTWFwKCB2aXoucmVuZGVyZXIsIHZpei5zY2VuZSApO1xuICAgICAgICAgICAgICAgIHZpei5wb3N0Q3ViZUNhbVJlbmRlckZucy5mb3JFYWNoKCBmbiA9PiBmbiggZGVsdGFNUywgdGltZXN0YW1wTVMgKSApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc29sdmUoIHZpeiApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXZWIgQ2FtIE1hdGVyaWFsXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuICAgIGZ1bmN0aW9uIG1ha2VXZWJDYW1NYXRlcmlhbCAoIHZpeiApIHtcbiAgICAgICAgcmV0dXJuIFcucHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG4gICAgICAgICAgICB2aXoud2ViQ2FtTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICAgICAgICAgIG1hcDogdml6LndlYkNhbVRleHR1cmUsXG4gICAgICAgICAgICAgICAgY29sb3I6IDB4ZmZmZmZmLFxuICAgICAgICAgICAgICAgIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzb2x2ZSggdml6ICk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLy8gV2ViIENhbSBCb3ggTWVzaFxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBDcmVhdGVzIGEgYm94IHdpdGggdGhlIHdlYiBjYW0gZGlzcGxheWVkXG4gICAgLy8gb24gdGhlIGluc2lkZSBvZiBlYWNoIG9mIGl0J3MgNiBzaWRlc1xuICAgIGZ1bmN0aW9uIG1ha2VXZWJDYW1Cb3hNZXNoICggdml6ICkge1xuICAgICAgICByZXR1cm4gVy5wcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUsIHJlamVjdCApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdml6LndlYkNhbXZCb3hNZXNoID0gbmV3IFRIUkVFLk1lc2goIG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSggMjAwMCwgMjAwMCwgMjAwMCApLCB2aXoud2ViQ2FtTWF0ZXJpYWwgKTtcblxuICAgICAgICAgICAgdmFyIHJvdGF0aW9uWCA9IFcucmFuZG9tQmV0d2VlbiggMC4wMDAyLCAwLjAwMDAyICk7XG4gICAgICAgICAgICB2YXIgcm90YXRpb25ZID0gVy5yYW5kb21CZXR3ZWVuKCAwLjAwMDIsIDAuMDAwMDIgKTtcbiAgICAgICAgICAgIHZhciByb3RhdGlvblogPSBXLnJhbmRvbUJldHdlZW4oIDAuMDAwMiwgMC4wMDAwMiApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJZiB3ZSB3YW50IHRvIHJvdGF0ZSBpdFxuICAgICAgICAgICAgYWRkUHJlUmVuZGVyRm4oIHZpeiwgZnVuY3Rpb24gKCBkZWx0YU1TLCB0aW1lc3RhbXBNUyApIHtcbiAgICAgICAgICAgICAgICB2aXoud2ViQ2FtdkJveE1lc2gucm90YXRpb24ueCArPSAoIGRlbHRhTVMgKiByb3RhdGlvblggKTtcbiAgICAgICAgICAgICAgICB2aXoud2ViQ2FtdkJveE1lc2gucm90YXRpb24ueSArPSAoIGRlbHRhTVMgKiByb3RhdGlvblkgKTtcbiAgICAgICAgICAgICAgICB2aXoud2ViQ2FtdkJveE1lc2gucm90YXRpb24ueiArPSAoIGRlbHRhTVMgKiByb3RhdGlvblogKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2aXouc2NlbmUuYWRkKCB2aXoud2ViQ2FtdkJveE1lc2ggKTtcblxuICAgICAgICAgICAgLy8gU2hvdyBpdCBvbmx5IGZvciB0aGUgY3ViZSBjYW1cbiAgICAgICAgICAgIHZpei5wcmVDdWJlQ2FtUmVuZGVyRm5zLnB1c2goIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2aXoud2ViQ2FtdkJveE1lc2gudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdml6LnBvc3RDdWJlQ2FtUmVuZGVyRm5zLnB1c2goIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2aXoud2ViQ2FtdkJveE1lc2gudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVzb2x2ZSggdml6ICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VCaWxsYm9hcmRCYWNrZ3JvdW5kICggdml6ICkge1xuICAgICAgICByZXR1cm4gVy5wcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUsIHJlamVjdCApIHtcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gIFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoICcvaW1hZ2UvYmlsbGJvYXJkLWJhY2tncm91bmQucG5nJyApO1xuICAgICAgICAgICAgdGV4dHVyZS5taW5GaWx0ZXIgPSBUSFJFRS5OZWFyZXN0RmlsdGVyO1xuICAgICAgICAgICAgdGV4dHVyZS5tYWdGaWxlciA9IFRIUkVFLk5lYXJlc3RGaWx0ZXI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICAgICAgICAgICAgbWFwOiB0ZXh0dXJlLFxuICAgICAgICAgICAgICAgIGNvbG9yOiAweGZmZmZmZixcbiAgICAgICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5KCAzNjAsIDY0MCApO1xuXG4gICAgICAgICAgICB2YXIgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblxuICAgICAgICAgICAgbWVzaC50cmFuc2xhdGVaKCAtMjUwICk7XG5cbiAgICAgICAgICAgIHZpei5zY2VuZS5hZGQoIG1lc2ggKTtcblxuICAgICAgICAgICAgdml6LnByZUN1YmVDYW1SZW5kZXJGbnMucHVzaCggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG1lc2gudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZpei5wb3N0Q3ViZUNhbVJlbmRlckZucy5wdXNoKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbWVzaC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXNvbHZlKCB2aXogKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2ViIENhbSBIZWRyb24gTWVzaFxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBtYWtlV2ViQ2FtSGVkcm9uTWVzaCAoIHZpeiApIHtcbiAgICAgICAgcmV0dXJuIFcucHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIExvYWRlclxuICAgICAgICAgICAgLy8gLS0tLS0tXG4gICAgICAgICAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlcigpO1xuICAgICAgICAgICAgbG9hZGVyLmxvYWQoICcvb2JqL2hlZHJvbi5vYmonLCBvbk9iakxvYWRlZCApO1xuXG4gICAgICAgICAgICAvLyBTd2FybSBDcmVhdGlvblxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgZnVuY3Rpb24gb25PYmpMb2FkZWQgKCBvYmogKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIG9iai5jaGlsZHJlblsgMCBdICk7XG4gICAgICAgICAgICAgICAgdml6LndlYkNhbUhlZHJvbk1lc2ggPSBvYmouY2hpbGRyZW5bIDAgXS5jbG9uZSgpOyAvL25ldyBUSFJFRS5NZXNoKCBuZXcgVEhSRUUuQm94R2VvbWV0cnkoIDIwMDAsIDIwMDAsIDIwMDAgKSwgbWF0ZXJpYWwgKTtcbiAgICAgICAgICAgICAgICB2aXoud2ViQ2FtSGVkcm9uTWVzaC5tYXRlcmlhbCA9IHZpei53ZWJDYW1NYXRlcmlhbC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IDYwMDA7XG4gICAgICAgICAgICAgICAgdml6LndlYkNhbUhlZHJvbk1lc2guc2NhbGUuc2V0KCBzY2FsZSwgc2NhbGUsIHNjYWxlICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcm90YXRpb25YID0gVy5yYW5kb21CZXR3ZWVuKCAwLjAwMDIsIDAuMDAwMDIgKTtcbiAgICAgICAgICAgICAgICB2YXIgcm90YXRpb25ZID0gVy5yYW5kb21CZXR3ZWVuKCAwLjAwMDIsIDAuMDAwMDIgKTtcbiAgICAgICAgICAgICAgICB2YXIgcm90YXRpb25aID0gVy5yYW5kb21CZXR3ZWVuKCAwLjAwMDIsIDAuMDAwMDIgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSB3YW50IHRvIHJvdGF0ZSBpdFxuICAgICAgICAgICAgICAgIGFkZFByZVJlbmRlckZuKCB2aXosIGZ1bmN0aW9uICggZGVsdGFNUywgdGltZXN0YW1wTVMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpei53ZWJDYW1IZWRyb25NZXNoLnJvdGF0aW9uLnggKz0gdml6LnZlbG9jaXR5WyAwIF0gKiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIHZpei53ZWJDYW1IZWRyb25NZXNoLnJvdGF0aW9uLnkgKz0gdml6LnZlbG9jaXR5WyAxIF0gKiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIHZpei53ZWJDYW1IZWRyb25NZXNoLnJvdGF0aW9uLnogKz0gdml6LnZlbG9jaXR5WyAyIF0gKiAwLjU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdml6LnNjZW5lLmFkZCggdml6LndlYkNhbUhlZHJvbk1lc2ggKTtcblxuICAgICAgICAgICAgICAgIC8vIFNob3cgaXQgb25seSBmb3IgdGhlIGN1YmUgY2FtXG4gICAgICAgICAgICAgICAgdml6LnByZUN1YmVDYW1SZW5kZXJGbnMucHVzaCggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2aXoud2ViQ2FtSGVkcm9uTWVzaC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdml6LndlYkNhbUhlZHJvbk1lc2gud2lyZWZyYW1lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZpei53ZWJDYW1IZWRyb25NZXNoLm1hdGVyaWFsLmNvbG9yLnNldCggMHhmZmZmZmYgKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZpei5wb3N0Q3ViZUNhbVJlbmRlckZucy5wdXNoKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpei53ZWJDYW1IZWRyb25NZXNoLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2aXoud2ViQ2FtSGVkcm9uTWVzaC5tYXRlcmlhbC5jb2xvci5zZXQoIHZpei5iYWNrZ3JvdW5kQ29sb3IgKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlc29sdmUoIHZpeiApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIExpZ2h0c1xuICAgIC8vIC0tLS0tLVxuICAgIGZ1bmN0aW9uIG1ha2VMaWdodHMgKCB2aXogKSB7XG4gICAgICAgIHJldHVybiBXLnByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSwgcmVqZWN0ICkge1xuICAgICAgICAgICAgdml6LnNjZW5lLmFkZCggbmV3IFRIUkVFLkFtYmllbnRMaWdodCggMHgyMjIyMjIgKSApO1xuXG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KCAweGZmZmZmZiwgMiApO1xuICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoIDIsIDEuMiwgMTAgKS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHZpei5zY2VuZS5hZGQoIGRpcmVjdGlvbmFsTGlnaHQgKTtcblxuICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KCAweGZmZmZmZiwgMSApO1xuICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoIC0yLCAxLjIsIC0xMCApLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgdml6LnNjZW5lLmFkZCggZGlyZWN0aW9uYWxMaWdodCApOyAgXG4gICAgICAgICAgICByZXNvbHZlKCB2aXogKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU3dhcm1cbiAgICAvLyAtLS0tLVxuICAgIGZ1bmN0aW9uIG1ha2VTd2FybSAoIHZpeiApIHtcbiAgICAgICAgcmV0dXJuIFcucHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBwYXJ0aWNsZXMgPSBbXTtcblxuICAgICAgICAgICAgLy8gQWRkIHRvIFNjZW5lXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIHZpei5zd2FybU9iamVjdDNEID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XG4gICAgICAgICAgICB2aXouc2NlbmUuYWRkKCB2aXouc3dhcm1PYmplY3QzRCApO1xuICAgICAgICAgICAgdml6LnByZUN1YmVDYW1SZW5kZXJGbnMucHVzaCggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZpei5zd2FybU9iamVjdDNELnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdml6LnBvc3RDdWJlQ2FtUmVuZGVyRm5zLnB1c2goIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2aXouc3dhcm1PYmplY3QzRC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGluZ1xuICAgICAgICAgICAgYWRkUHJlUmVuZGVyRm4oIHZpeiwgZnVuY3Rpb24gKCBkZWx0YU1TLCB0aW1lc3RhbXBNUyApIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZXMuZm9yRWFjaCggcGFydGljbGUgPT4gcGFydGljbGUudXBkYXRlKCBkZWx0YU1TLCB0aW1lc3RhbXBNUyApICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUGFydGljbGUgQ2xhc3NcbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBmdW5jdGlvbiBQYXJ0aWNsZSAoIG1lc2ggKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnZlbG9jaXR5ID0gWyAwLCAwLCAwIF07XG5cbiAgICAgICAgICAgICAgICAvLyBNZXNoXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNoID0gbWVzaC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmNob3IuYWRkKCB0aGlzLm1lc2ggKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc2gubWF0ZXJpYWwgPSBQYXJ0aWNsZS5tYXRlcmlhbC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIC8vdGhpcy5tZXNoLm1hdGVyaWFsLmNvbG9yLm9mZnNldEhTTCggMC4xNSAtIFcucmFuZG9tQmV0d2VlbiggLTAuMSwgMC4xICksIDAuMywgLTAuMyApO1xuICAgICAgICAgICAgICAgIC8vdGhpcy5tZXNoLm1hdGVyaWFsLmNvbG9yLnNldFN0eWxlKCAncmdiKCAyNDEsIDg2LCAzNSknICk7XG4gICAgICAgICAgICAgICAgLy90aGlzLm1lc2gubWF0ZXJpYWwuY29sb3Iub2Zmc2V0SFNMKCAwLjIxOTQ0NDQ0NCwgMSwgLTAuNSApO1xuICAgICAgICAgICAgICAgIHRoaXMubWVzaC5tYXRlcmlhbC5jb2xvciA9IHZpei5zd2FybUNvbG9yO1xuXG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gNzA7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNoLnRyYW5zbGF0ZVgoIFcucmFuZG9tQmV0d2VlbiggLXJhbmdlLCByYW5nZSApICk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNoLnRyYW5zbGF0ZVkoIFcucmFuZG9tQmV0d2VlbiggLXJhbmdlLCByYW5nZSApICk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNoLnRyYW5zbGF0ZVooIFcucmFuZG9tQmV0d2VlbiggLXJhbmdlLCByYW5nZSApICk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gVy5tYXAoIHRoaXMubWVzaC5wb3NpdGlvbi5kaXN0YW5jZVRvKCB0aGlzLmFuY2hvci5wb3NpdGlvbiApLCAwLCByYW5nZSwgMSwgMC4xLCB0cnVlICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2NhbGVNdXRpcGxpZXIgPSAyNTA7XG4gICAgICAgICAgICAgICAgdmFyIGQgPSBXLmludGVycG9sYXRpb25zLnF1YXJ0aWNFYXNlT3V0KCB0aGlzLmRpc3RhbmNlICk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnNldCggZCAqIHNjYWxlTXV0aXBsaWVyIC8gMiwgZCAqIHNjYWxlTXV0aXBsaWVyIC8gMiwgZCAqIHNjYWxlTXV0aXBsaWVyICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgciA9IHRvUmFkKCAxODAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc2gucm90YXRpb24ueCA9IFcucmFuZG9tQmV0d2VlbiggLXIsIHIgKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc2gucm90YXRpb24ueSA9IFcucmFuZG9tQmV0d2VlbiggLXIsIHIgKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc2gucm90YXRpb24ueiA9IFcucmFuZG9tQmV0d2VlbiggLXIsIHIgKTtcblxuICAgICAgICAgICAgICAgIHZhciBvZmZlc3QgPSAwLjI7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmNob3Iucm90YXRpb24ueCArPSAgVy5yYW5kb21CZXR3ZWVuKCAtdG9SYWQoMjApLCB0b1JhZCgyMCkgICk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0aW9uU3BlZWQgPSBbIE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCkgXS5tYXAoIE1hdGguYWJzICk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0b1JhZCAoIHYgKSB7IHJldHVybiB2ICogMC4wMTc0NTMyOTI1OyB9IFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAjIyMgU3RhdGljXG4gICAgICAgICAgICBQYXJ0aWNsZS5tYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAweGZmZmZmZixcbiAgICAgICAgICAgICAgICBzaGluaW5lc3M6IDAuMCxcbiAgICAgICAgICAgICAgICBzcGVjdWxhcjogMHhmZmZmZmYsXG4gICAgICAgICAgICAgICAgZW52TWFwOiB2aXouY3ViZUNhbWVyYS5yZW5kZXJUYXJnZXQsXG4gICAgICAgICAgICAgICAgcmVmbGVjdGl2aXR5OiAxLjAsXG4gICAgICAgICAgICAgICAgc2lkZTogVEhSRUUuRG91YmxlU2lkZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vICMjIyBNZXRob2RcbiAgICAgICAgICAgIFBhcnRpY2xlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoIGRlbHRhTVMsIHRpbWVzdGFtcE1TICkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVsgMCBdICs9ICggdml6LnZlbG9jaXR5WyAwIF0gLSB0aGlzLnZlbG9jaXR5WyAwIF0gKSAqICggMSAtIHRoaXMuZGlzdGFuY2UgKSAqIDAuMDU7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVsgMSBdICs9ICggdml6LnZlbG9jaXR5WyAxIF0gLSB0aGlzLnZlbG9jaXR5WyAxIF0gKSAqICggMSAtIHRoaXMuZGlzdGFuY2UgKSAqIDAuMDU7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVsgMiBdICs9ICggdml6LnZlbG9jaXR5WyAyIF0gLSB0aGlzLnZlbG9jaXR5WyAyIF0gKSAqICggMSAtIHRoaXMuZGlzdGFuY2UgKSAqIDAuMDU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvci5yb3RhdGlvbi54ICs9IHRoaXMudmVsb2NpdHlbIDAgXSAqIDAuNDtcbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvci5yb3RhdGlvbi55ICs9IHRoaXMudmVsb2NpdHlbIDEgXSAqIDAuNDtcbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvci5yb3RhdGlvbi56ICs9IHRoaXMudmVsb2NpdHlbIDIgXSAqIDAuNDtcblxuICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5tYXgoIHRoaXMudmVsb2NpdHlbIDAgXSwgdGhpcy52ZWxvY2l0eVsgMSBdLCB0aGlzLnZlbG9jaXR5WyAyIF0gKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubWVzaC5yb3RhdGlvbi54ICs9IDAuMDEgKiB0aGlzLnJvdGF0aW9uU3BlZWRbIDAgXTsgLy8gciAqIHRoaXMucm90YXRpb25TcGVlZFsgMCBdICogMTA7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNoLnJvdGF0aW9uLnkgKz0gMC4wMSAqIHRoaXMucm90YXRpb25TcGVlZFsgMSBdIDsgLy9yICogdGhpcy5yb3RhdGlvblNwZWVkWyAxIF0gKiAxMDtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc2gucm90YXRpb24ueiArPSAwLjAxICogdGhpcy5yb3RhdGlvblNwZWVkWyAyIF07IC8vciAqIHRoaXMucm90YXRpb25TcGVlZFsgMiBdICogMTBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIExvYWRlclxuICAgICAgICAgICAgLy8gLS0tLS0tXG4gICAgICAgICAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlcigpO1xuICAgICAgICAgICAgbG9hZGVyLmxvYWQoICcvb2JqL3BpbGxvdy1ib3gub2JqJywgb25PYmpMb2FkZWQgKTtcblxuICAgICAgICAgICAgLy8gU3dhcm0gQ3JlYXRpb25cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uT2JqTG9hZGVkICggb2JqICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIG1lc2ggPSBvYmouY2hpbGRyZW5bIDAgXTtcblxuICAgICAgICAgICAgICAgIC8vIFBhcnRpY2xlIENyZWF0aW9uXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBFYXNlIGluIHRoZSBjcmVhdGlvbiBvZiB0aGUgcGFydGljbGVzXG4gICAgICAgICAgICAgICAgdmFyIG1heFBhcnRpY2xlcyA9IDEyMDtcbiAgICAgICAgICAgICAgICB2YXIgbWluQ3JlYXRpb25UaW1lID0gNTtcbiAgICAgICAgICAgICAgICB2YXIgbWF4Q3JlYXRpb25UaW1lTVMgPSAyMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAoZnVuY3Rpb24gY3JlYXRlTW9yZSAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcGFydGljbGVzLmxlbmd0aCA8IG1heFBhcnRpY2xlcyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0aWNsZSA9IG5ldyBQYXJ0aWNsZSggbWVzaCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdml6LnN3YXJtT2JqZWN0M0QuYWRkKCBwYXJ0aWNsZS5hbmNob3IgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlcy5wdXNoKCBwYXJ0aWNsZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggY3JlYXRlTW9yZSwgVy5tYXAoIHBhcnRpY2xlcy5sZW5ndGggLyBtYXhQYXJ0aWNsZXMsIDAsIDEsIG1heENyZWF0aW9uVGltZU1TLCBtaW5DcmVhdGlvblRpbWUsIFcuaW50ZXJwb2xhdGlvbnMuZWFzZUluICkgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc29sdmUoIHZpeiApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZW5kZXIgTG9vcFxuICAgIC8vIC0tLS0tLS0tLS0tXG4gICAgZnVuY3Rpb24gbWFrZVJlbmRlckxvb3AgKCB2aXogKSB7XG4gICAgICAgIHJldHVybiBXLnByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSwgcmVqZWN0ICkge1xuXG4gICAgICAgICAgICB2YXIgbGFzdFRpbWVzdGFtcE1TID0gMDtcbiAgICAgICAgICAgIHZhciBkZWx0YU1TID0gMDtcblxuICAgICAgICAgICAgKGZ1bmN0aW9uICBsb29wICggY3VycmVudFRpbWVzdGFtcE1TICkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlY3VyXG4gICAgICAgICAgICAgICAgLy8gLS0tLS1cbiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBsb29wICk7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGltZXN0YW1wc1xuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIGRlbHRhTVMgPSBjdXJyZW50VGltZXN0YW1wTVMgLSBsYXN0VGltZXN0YW1wTVM7XG4gICAgICAgICAgICAgICAgbGFzdFRpbWVzdGFtcE1TID0gY3VycmVudFRpbWVzdGFtcE1TO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFjdGlvbmFibGVzXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICB2aXoucHJlUmVuZGVyRm5zLmZvckVhY2goIGZuID0+IGZuKCBkZWx0YU1TLCBjdXJyZW50VGltZXN0YW1wTVMgKSApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlbmRlclxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLVxuICAgICAgICAgICAgICAgIHZpei5yZW5kZXJlci5yZW5kZXIoIHZpei5zY2VuZSwgdml6LmNhbWVyYSApO1xuXG4gICAgICAgICAgICB9KCBsYXN0VGltZXN0YW1wTVMgKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc29sdmUoIHZpeiApO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8vIFV0aWxzXG4gICAgLy8gPT09PT1cblxuICAgIC8vIFJlbmRlciBMb29wXG4gICAgLy8gLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBhZGRQcmVSZW5kZXJGbiAoIHZpeiwgZm4gKSB7XG4gICAgICAgIHZpei5wcmVSZW5kZXJGbnMucHVzaCggZm4gKTtcbiAgICAgICAgcmV0dXJuIHZpejtcbiAgICB9XG5cbiAgICAvLyBDYW1lcmFcbiAgICAvLyAtLS0tLS1cbiAgICBmdW5jdGlvbiBzZXRDYW1lcmFQb3NpdGlvbiAoIHZpeiwgeCwgeSwgeiApIHtcbiAgICAgICAgdml6LmNhbWVyYS5wb3NpdGlvbi54ID0geDtcbiAgICAgICAgdml6LmNhbWVyYS5wb3NpdGlvbi55ID0geTtcbiAgICAgICAgdml6LmNhbWVyYS5wb3NpdGlvbi56ID0gejtcbiAgICAgICAgcmV0dXJuIHZpejtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRWZWxvY2l0eSAoIHZpeiwgeCwgeSwgeiApIHtcbiAgICAgICAgaWYgKCBXLmlzRGVmaW5lZCggeCApICYmIHggIT09IG51bGwgKSB7IHZpei52ZWxvY2l0eVsgMCBdID0geDsgfVxuICAgICAgICBpZiAoIFcuaXNEZWZpbmVkKCB5ICkgJiYgeSAhPT0gbnVsbCApIHsgdml6LnZlbG9jaXR5WyAxIF0gPSB5OyB9XG4gICAgICAgIGlmICggVy5pc0RlZmluZWQoIHogKSAmJiB6ICE9PSBudWxsICkgeyB2aXoudmVsb2NpdHlbIDIgXSA9IHo7IH1cbiAgICAgICAgcmV0dXJuIHZpejtcbiAgICB9XG4gICAgXG4gICAgLy8gRXhwb3J0XG4gICAgLy8gPT09PT09ICAgIFxuICAgIHJldHVybiB7XG4gICAgICAgIG1ha2VWaXo6IG1ha2VWaXosXG4gICAgICAgIGluaXRWaXo6IGluaXRWaXosXG4gICAgICAgIHNldFZlbG9jaXR5OiBzZXRWZWxvY2l0eVxuICAgIH07XG4gICAgXG59KCkpO1xuXG5cblxuXG5cblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9